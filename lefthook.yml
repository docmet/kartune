pre-commit:
  parallel: true
  commands:
    # Backend linting with auto-fix
    backend-lint:
      glob: "backend/**/*.py"
      run: |
        echo "ğŸ” Running ruff on backend..."
        docker compose exec -T backend ruff check . --fix
        docker compose exec -T backend ruff format .
        
    # Backend type checking
    backend-typecheck:
      glob: "backend/**/*.py"
      run: |
        echo "ğŸ” Type checking backend..."
        docker compose exec -T backend mypy . --config-file pyproject.toml || true
        
    # Frontend linting
    frontend-lint:
      glob: "frontend/**/*.{ts,tsx,js,jsx}"
      run: |
        echo "ğŸ” Linting frontend..."
        docker compose exec -T frontend npm run lint -- --fix || true
        
    # Stage auto-fixed files
    stage-fixes:
      run: |
        echo "ğŸ“ Staging auto-fixed files..."
        git add -u
